<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ozymandias</title>
    <link rel="stylesheet" href="/styles/tufte.css">
</head>
<body>
<article>
    <h1 id="ozymandias">Ozymandias</h1>
    <p><a href="/">Joel Gustafson</a></p>
    <p>
        <a href="https://github.com/joeltg/ozymandias">GitHub</a>, <a href="http://ozymandias.xyz">Demo</a>
    </p>
    <p>
        Scheme is a beautiful language, but for those afraid of Emacs it can be difficult to use, and things that are difficult to use are difficult to learn.
        This project is a modern MIT Scheme environment in the browser that tries its best to be friendly and usable.
    </p>

    <section id="usage">
        <h2>Usage</h2>
        <p>
            The editor is a little different than the usual editor/repl split, and is more similar to <a href="http://lighttable.com/">LightTable</a> or the <a href="https://atom.io/packages/hydrogen">Hydrogen plugin</a> for Atom than traditional editors.
            Expressions are evaluated inline and results are printed below each expression.
        </p>

        <p>
            For example, typing <code>(apply vector (map square (iota 3)))</code> in the editor and then evaluating it with <code>Ctrl-Enter</code> (or <code>Cmd-Enter</code>) will print the commented result <code>#(0 1 4)</code> below.
            But we can also tab between Scheme and TeX representations of results:
        </p>

        <figure><img src="lambda.gif" alt="such graphics, many latex"></figure>

        <p>You can also do some fun symbolic computing thanks to <a href="https://groups.csail.mit.edu/mac/users/gjs/6946/refman.txt">scmutils</a>:</p>

        <figure><img src="lambda2.gif" alt="much symbol, so algebra"></figure>

        <p>
            The help panel summarizes the available keyboard shortcuts and commands - if you’re already used to Emacs or Sublime, most of the existing commands should work here as well.
            And if you’re not, great! You don’t really need them anyway - just click on the commands in the help panel instead.
        </p>
    </section>

    <section id="installation">
        <h2>Installation</h2>
        <p>Things you need:</p>

        <ul>
            <li><a href="https://nodejs.org/en/">Node.js</a> v6+</li>
            <li><a href="https://wiki.debian.org/Schroot">schroot</a></li>
            <li>Ubuntu 14.04+ / Debian 8+</li>
        </ul>

        <p>
            It probably works with earlier versions, other *nixes, and maybe even macOS, but it’s never been tried.
            If you try to run it on Windows, Gerry Sussman will hunt you down and throw chalk at you.
        </p>

        <p>Things you do:</p>

        <figure>
            <pre>
                <code>
                    npm install
                    npm run build
                    sudo nodejs server/server.js
                    &gt; socket listening on port 1947
                    &gt; server listening on port 3000
                </code>
            </pre>
        </figure>

        <p>… and it’s live on <code>http://localhost:3000</code>! Amazing.</p>
    </section>

    <section>
        <h2 id="notes">Notes</h2>

        <h3 id="permissions--security">Permissions &amp; Security</h3>
        <p>
            Since each Scheme subprocess is sandboxed in a chroot jail, the server needs to be run with sudo permissions so it can write to <code>/etc/schroot</code> and manipulate file mounts.
            There’s <em>probably</em> a way to get around this (pull requests welcomed) but if it’s that concerning you probably shouldn’t be doing it anyway - chroot jails are not that secure and you’re literally letting strangers on the Internet execute code on your computer.
            Don’t run this publicly on a machine you really care about.
        </p>

        <h3 id="authentication">Authentication</h3>
        <p>
            Ozymandias is designed to support user accounts.
            There are two authentication modules in <code>server/authentication/</code> for <a href="https://ist.mit.edu/touchstone">MIT Touchstone</a> and <a href="https://developer.github.com/v3/">GitHub</a>, but it’s designed to be extensible.
            Any scheme (ha) you want to implement just has to attach the appropriate routing middleware to the express app, and pass the appropriate username into every new <code>Connection</code>.
            The default is the <code>null</code> user, which is a public directory, readable and writable by everyone.
        </p>

        <h3 id="credits">Credits</h3>
        <p>None of this would be possible without the incredible work of many free and open-source projects, and none of them get enough thanks:</p>

        <ul>
            <li><a href="https://groups.csail.mit.edu/mac/users/gjs/6946/">scmutils</a></li>
            <li><a href="https://github.com/codemirror/CodeMirror">CodeMirror</a></li>
            <li><a href="https://github.com/d3/d3">D3.js</a></li>
            <li><a href="https://github.com/Khan/KaTeX">Katex</a></li>
        </ul>

        <p>And obligatory thanks to Professor Sussman for his indispensable insight and guidance.</p>
    </section>
</article>
</body>
</html>